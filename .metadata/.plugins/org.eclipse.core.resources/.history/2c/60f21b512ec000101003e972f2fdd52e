<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.Image?>

<BorderPane fx:controller="com.adb.fx.controller.PerfilController"
            xmlns:fx="http://javafx.com/fxml" 
            prefWidth="1400" 
            prefHeight="900"
            stylesheets="@styles.css" 
            styleClass="root-container">

    <!-- Navbar Mejorado -->
    <top>
        <HBox styleClass="navbar-enhanced" alignment="CENTER_LEFT" spacing="40">
            <padding>
                <Insets top="18" right="50" bottom="18" left="50"/>
            </padding>

            <!-- Logo y tÃ­tulo -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <ImageView fitHeight="45" fitWidth="45" preserveRatio="true">
                    <image>
                        <Image url="@images/icon-logo.png"/>
                    </image>
                </ImageView>
                <VBox spacing="2">
                    <Label text="Nexus Deportivo" styleClass="logo-text-enhanced"/>
                    <Label text="Panel de Usuario" styleClass="logo-subtitle"/>
                </VBox>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Botones de navegaciÃ³n mejorados -->
            <HBox spacing="15" alignment="CENTER">
                <Button text="ðŸ† Torneos" styleClass="nav-btn-modern" onAction="#irATorneos"/>
                <Button text="ðŸ‘¤ Mi Perfil" styleClass="nav-btn-modern-active"/>
                <Button text="ðŸšª Salir" styleClass="nav-btn-danger-modern" onAction="#cerrarSesion"/>
            </HBox>
        </HBox>
    </top>

    <!-- Contenido principal -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="35" alignment="TOP_CENTER" style="-fx-padding: 45;">
                
                <!-- Header con foto de perfil MEJORADO -->
                <HBox spacing="40" alignment="CENTER" styleClass="profile-header-modern">
                    <padding>
                        <Insets top="45" right="50" bottom="45" left="50"/>
                    </padding>
                    
                    <!-- Avatar grande con badge de rol -->
                    <StackPane>
                        <VBox alignment="CENTER" spacing="10">
                            <StackPane styleClass="profile-avatar-large">
                                <Label text="ðŸ‘¤" style="-fx-font-size: 70px;"/>
                            </StackPane>
                            <Label fx:id="lblRolBadge" text="ðŸŽ¯ Jugador" styleClass="profile-role-badge"/>
                        </VBox>
                    </StackPane>
                    
                    <!-- InformaciÃ³n principal -->
                    <VBox spacing="15" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
                        <Label fx:id="lblNombreCompleto" text="Camila GonzÃ¡lez" 
                               styleClass="profile-name-large"/>
                        <HBox spacing="20">
                            <VBox spacing="5">
                                <Label text="ðŸ“§ Email" styleClass="profile-info-label"/>
                                <Label fx:id="lblCorreo" text="camila@gmail.com" 
                                       styleClass="profile-info-value"/>
                            </VBox>
                            <Separator orientation="VERTICAL"/>
                            <VBox spacing="5">
                                <Label text="ðŸ“… Miembro desde" styleClass="profile-info-label"/>
                                <Label fx:id="lblFechaRegistro" text="Noviembre 2025" 
                                       styleClass="profile-info-value"/>
                            </VBox>
                            <Separator orientation="VERTICAL"/>
                            <VBox spacing="5">
                                <Label text="âš½ Deporte" styleClass="profile-info-label"/>
                                <Label fx:id="lblDeporteFavorito" text="FÃºtbol" 
                                       styleClass="profile-info-value"/>
                            </VBox>
                        </HBox>
                    </VBox>
                    
                    <!-- EstadÃ­sticas rÃ¡pidas -->
                    <VBox spacing="15" alignment="CENTER">
                        <HBox spacing="20">
                            <VBox spacing="5" alignment="CENTER" styleClass="quick-stat">
                                <Label fx:id="lblTotalTorneos" text="3" styleClass="stat-number-big"/>
                                <Label text="Torneos" styleClass="stat-label-small"/>
                            </VBox>
                            <VBox spacing="5" alignment="CENTER" styleClass="quick-stat">
                                <Label fx:id="lblTotalEquipos" text="2" styleClass="stat-number-big"/>
                                <Label text="Equipos" styleClass="stat-label-small"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </HBox>

                <!-- NavegaciÃ³n por tabs MEJORADA -->
                <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" 
                           hbarPolicy="NEVER" vbarPolicy="NEVER">
                    <HBox spacing="12" alignment="CENTER" styleClass="profile-tabs-modern">
                        <Button fx:id="btnTabInformacion" text="ðŸ“‹ InformaciÃ³n" 
                                styleClass="tab-modern-active" 
                                onAction="#mostrarInformacion"/>
                        <Button fx:id="btnTabMisTorneos" text="ðŸ† Mis Torneos" 
                                styleClass="tab-modern" 
                                onAction="#mostrarTorneos"/>
                        <Button fx:id="btnTabMisEquipos" text="ðŸ‘¥ Mis Equipos" 
                                styleClass="tab-modern" 
                                onAction="#mostrarEquipos"/>
                        <Button fx:id="btnTabHistorial" text="ðŸ“Š Historial" 
                                styleClass="tab-modern" 
                                onAction="#mostrarHistorial"/>
                        <Button fx:id="btnTabSolicitudes" text="âœ‰ï¸ Solicitudes" 
                                styleClass="tab-modern" 
                                onAction="#mostrarSolicitudes"/>
                        <Button fx:id="btnTabConfiguracion" text="âš™ï¸ ConfiguraciÃ³n" 
                                styleClass="tab-modern" 
                                onAction="#mostrarConfiguracion"/>
                    </HBox>
                </ScrollPane>

                <!-- StackPane para cambiar entre secciones -->
                <StackPane prefWidth="1100">
                    
                    <!-- ==================== SECCIÃ“N: INFORMACIÃ“N ==================== -->
                    <VBox fx:id="seccionInformacion" spacing="25" visible="true">
                        
                        <Label text="InformaciÃ³n Personal" styleClass="section-title-modern"/>
                        
                        <!-- Card de informaciÃ³n -->
                        <GridPane hgap="30" vgap="20" styleClass="info-card-modern">
                            <padding>
                                <Insets top="35" right="35" bottom="35" left="35"/>
                            </padding>
                            
                            <columnConstraints>
                                <ColumnConstraints minWidth="150" prefWidth="150"/>
                                <ColumnConstraints minWidth="300" prefWidth="300"/>
                                <ColumnConstraints minWidth="150" prefWidth="150"/>
                                <ColumnConstraints minWidth="300" prefWidth="300"/>
                            </columnConstraints>
                            
                            <!-- Fila 1 -->
                            <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                <Label text="Nombre" styleClass="info-label-modern"/>
                                <Label fx:id="lblInfoNombre" text="Camila" styleClass="info-value-modern"/>
                            </VBox>
                            
                            <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="0">